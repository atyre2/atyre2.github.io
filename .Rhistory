getwd()
?opts_knit
?rmarkdown::render
head(mtcars)
ggplot(mtcars,aes(speed, dist, col = disp)) + geom_point()
library(ggplot2)
ggplot(mtcars,aes(speed, dist, col = disp)) + geom_point()
head(cars)
ggplot(mtcars,aes(disp, mpg, col = cyl)) + geom_point()
rmarkdown::render("_drafts/testing_markdown.Rmd",)
rmarkdown::render("_drafts/testing_markdown.Rmd",output_dir = "_posts")
rmarkdown::render("_drafts/testing_markdown.Rmd",output_dir = "_posts")
rmarkdown::render("_drafts/testing_markdown.Rmd",output_dir = "_posts")
rmarkdown::render("_drafts/testing_markdown.Rmd",output_dir = "_posts")
?render
install.packages(c("knitr", "servr", "devtools"))
install.packages(c("knitr", "servr", "devtools"))
devtools::install_github("hadley/lubridate")
devtools::install_github("brendan-r/brocks")
library(brocks)
?
new_post()
new_post("The trouble with tibbles", serve=FALSE, subdir=FALSE)
new_post("The trouble with tibbles", serve=FALSE, subdir=FALSE, dir="_drafts")
new_post
?servr::jekyll
rmdv2
servr::rmdv2
blog_gen
servr::jekyll()
servr::jekyll
?blog_gen
blog_gen(input="_drafts")
jekyll_build
servr::jekyll_build
?servr::jekyll_build
?servr::jekyll_config
servr:::jekyll_config
source("Build.R")
file.exists(config <- file.path(dir, "_config.yml")
)
dir
dir = "."
file.exists(config <- file.path(dir, "_config.yml"))
table1 <- data.frame(Year = 1944:1935,
N_dams = c(8,4,0,4,6,5,3,2,3,4),
Males = c(70,43,NA,51,92,50,29,22,21,54),
Females = c(78,45,NA,47,85,48,28,22,34,51),
Sex_ND = c(9,9,NA,3,5,10,3,4,14,4))
table1
?kable
knitr::render_markdown()
?render_markdown
getwd()
knitr::knit("_drafts/the-sex-ratio-of-chickens","_drafts/testing.md")
knitr::knit("_drafts/the-sex-ratio-of-chickens.Rmd","_drafts/testing.md")
names(table1)
sexratio <- with(table1, 100 * Males / (Females + Males))
sexratio
t.test(sexratio - 50)
sd(sexratio - 50) / sqrt(9)
sd(sexratio - 50, na.rm = TRUE) / sqrt(9)
names(table1)
year.model <- lmer(cbind(Males,Females)~1 + (1|Year), data = table1)
library(lme4)
year.model <- lmer(cbind(Males,Females)~1 + (1|Year), data = table1)
year.model <- glmer(cbind(Males,Females)~1 + (1|Year), data = table1, family=binomial)
summary(year.model)
table2 <- data.frame(Hen = 1:11,
Males = c(4,4,113,15,18,9,14,9,11,15,15),
Females = c(14,7,7,13,12,9,19,6,9,12,18))
ind.model <- glmer(cbind(Males,Females)~1 + (1|Year), data = table2, family=binomial)
ind.model <- glmer(cbind(Males,Females)~1 + (1|Hen), data = table2, family=binomial)
summary(ind.model)
knit_with_parameters('D:/atyre2/atyre2.github.io/_drafts/the-sex-ratio-of-chickens.Rmd', encoding = 'UTF-8')
knitr::knit("_drafts/the-sex-ratio-of-chickens.Rmd","_drafts/testing.md")
pbinom(0:8,8,0.5)
binomial_probs = data.frame(hens=0:8,
d = dbinom(0:8, 8, 0.5),
p = pbinom(0:8, 8, 0.5))
kable(binomial_probs, digits = 3)
knitr::kable(binomial_probs, digits = 3)
knitr::kable(binomial_probs, digits = 2)
?simulate.merMod
gm1 <- glmer(cbind(incidence, size - incidence) ~ period + (1 | herd),
data = cbpp, family = binomial)
gg <- simulate(gm1,1000)
gg
dim(gg)
class(gg)
gg[[1]]
sims <- simulate(ind.model, 1000)
sims[[1]]
.GlobalEnv
?.GlobalEnv
?knit
?knitr::knit
a = c("_drafts/2016-04-14-the-trouble-with-tibbles.Rmd", "_posts/2016-04-14-the-trouble-with-tibbles.md")
a
d = gsub('^_|[.][a-zA-Z]+$', '', a[1])
d
sprintf('figure/%s/', d)
sprintf('cache/%s/', d)
sprintf('%s/', gsub('^.+/', '', d))
?opts_knit
?knitr::opts_knit
knitr::opts_knit$get()
df <- data.frame(a = 1:26,
b = letters)
sapply(df,class)
sum(df[,"b"] == 'b')
library(dplyr)
my_first_tbl <- tbl_df(df)
my_first_tbl
sum(my_first_tbl[,"b"] == 'b')
my_first_tbl[,"b"]
substr(df[,"b"],1,1)
as.character(df[,"b"],1,1)
sum(as.character(my_first_tbl[,"b"]) == 'b')
?[
?'['
class(my_first_tbl[,"b"])
class(df[,"b"])
class(df[,"b", drop=TRUE])
sum(as.character(df[,"b", drop=FALSE],1,1) == 'b')
my_second_tbl <- tbl_df(a = 1:26,
b = letters)
?tbl_df
my_second_tbl <- tbl(a = 1:26,
b = letters)
install.packages("tibble")
library(tibble)
my_second_tbl <- data_frame(a = 1:26,
b = letters)
class(my_second_tbl)
my_second_tbl
knitr::render_markdown()
d
knitr::opts_chunk$set(
fig.path   = sprintf('figure/%s/', d),
cache.path = sprintf('cache/%s/', d)
)
knitr::opts_knit$set(width = 70)
a
knitr::knit(a[1], a[2], quiet = TRUE, encoding = 'UTF-8', envir = .GlobalEnv)
opts_chunk$get("fig.path")
knitr::opts_chunk$get("fig.path")
knitr::knit(a[1], a[2], quiet = TRUE, encoding = 'UTF-8', envir = .GlobalEnv)
str(summary(ind.model))
par(ind.model)
coef(ind.model)
?coef.merMod
coef(ind.model, fixed.only = TRUE)
vcov(ind.model)
summary(ind.model)
0.2978^2
ind.model@theta
ind.model@beta
simulate(ind.model)
simulate(ind.model)
simulate(ind.model)
sd_p <- vcov(ind.model)
sd_p
summary(ind.model)
ind.model@theta
p <- rnorm(hens, mean = mean_p, sd = sqrt(var_p + var_ind))
hens <- 100
clutchsize <- 8
clutches <- matrix(NA, nrow = hens, ncol = 2)
mean_p <- ind.model@beta
var_p <- vcov(ind.model) # uncertainty in p
var_ind <- ind.model@theta^2
p <- rnorm(hens, mean = mean_p, sd = sqrt(var_p + var_ind))
sqrt(var_p + var_ind
)
var_p <- as.numeric(vcov(ind.model)) # uncertainty in p
p <- rnorm(hens, mean = mean_p, sd = sqrt(var_p + var_ind))
p
logodds <- rnorm(hens, mean = mean_p, sd = sqrt(var_p + var_ind))
# convert to probability
p <-  1 / (1 + exp(-logodds))
p
males <- rbinom(hens, size = clutchsize, p = p)
males
as.data.frame(males)
library(ggplot2)
gg <- ggplot(males,aes(x=males)) + geom_histogram()
gg <- ggplot(as.data.frame(males),aes(x=males)) + geom_histogram()
gg
?stat_count
gg <- ggplot(as.data.frame(males),aes(x=males)) + geom_bar()
gg
hens <- 1000
clutchsize <- 8
clutches <- matrix(NA, nrow = hens, ncol = 2)
mean_p <- ind.model@beta
var_p <- as.numeric(vcov(ind.model)) # uncertainty in p
var_ind <- ind.model@theta^2
logodds <- rnorm(hens, mean = mean_p, sd = sqrt(var_p + var_ind))
# convert to probability
p <-  1 / (1 + exp(-logodds))
males <- rbinom(hens, size = clutchsize, p = p)
library(ggplot2)
gg <- ggplot(as.data.frame(males),aes(x=males)) + geom_bar()
gg
floor(100 * sum(males<4)/hens)
binomial_probs
gg <- ggplot(as.data.frame(males),aes(x=males)) + geom_bar() + geom_line(binomial_probs, aes(x=hens,y=d*hens))
class(binomial_probs)
gg <- ggplot(as.data.frame(males),aes(x=males)) + geom_bar() + geom_line(binomial_probs, aes(x=hens,y=freq))
binomial_probs$freq <- binomial_probs$d * hens
gg <- ggplot(as.data.frame(males),aes(x=males)) + geom_bar() + geom_line(binomial_probs, aes(x=hens,y=freq))
binomial_probs
?geom_line
gg <- ggplot(as.data.frame(males),aes(x=males)) + geom_bar() + geom_line(data=binomial_probs, mapping=aes(x=hens, y=freq))
gg
knitr::render_markdown()
a = c("_drafts/the-sex-ratio-of-chickens.Rmd","_posts/the-sex-ratio-of-chickens.md" )
d = gsub('^_|[.][a-zA-Z]+$', '', a[1])
knitr::opts_chunk$set(
fig.path   = sprintf('figure/%s/', d),
cache.path = sprintf('cache/%s/', d)
)
knitr::opts_knit$set(width = 70)
knitr::knit(a[1], a[2], quiet = TRUE, encoding = 'UTF-8', envir = .GlobalEnv)
